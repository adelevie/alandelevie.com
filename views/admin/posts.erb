<% content_for(:title) { "Posts" } %>

<% content_for :head do %>
  <script type="text/javascript">
    $(function() {
      $("ol.listing li").click(function() {
        location.href = $(this).children("a")[0].href;
      });
    })
  </script>
<% end %>

<% content_for :sidebar_left do %>
  <a href="/admin/posts/new">+ new post</a><br/>
  <a href="/admin/comments/">all comments</a><br/>
  <a href="/admin/comments/flagged/">flagged comments</a><br/>
  <a href="/admin/logout">&raquo; logout &laquo;</a>
<% end %>

<% content_for :footer_left do %>
  <% if previous_page?(posts, page, per_page) %>
    <a href="/admin/posts/?page=<%= page - 1 %>">&laquo; newer posts</a>
  <% end %>
<% end %>

<% content_for :footer_right do %>
  <% if next_page?(posts, page, per_page) %>
    <a href="/admin/posts/?page=<%= page + 1 %>">older posts &raquo;</a>
  <% end %>
<% end %>

<ol class="listing">
  <% posts.each do |post| %>
    <li>
      <a href="/admin/post/<%= post.slug %>"><%= h post.title %></a>
    
      <% if post.draft %>
        <span class="flags draft">draft</span>
      <% end %>
      <% if post.private %>
        <span class="flags private">private</span>
      <% end %>
    </li>
  <% end %>
</ol>